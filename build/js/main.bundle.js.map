{"version":3,"sources":["webpack://keksobooking/./source/js/avatar.js","webpack://keksobooking/webpack/bootstrap","webpack://keksobooking/./source/js/card.js","webpack://keksobooking/./source/js/data.js","webpack://keksobooking/./source/js/form.js","webpack://keksobooking/./source/js/filter.js","webpack://keksobooking/./source/js/map.js"],"names":["FILE_TYPES","photoChooser","document","querySelector","photoPreview","addEventListener","avatar","files","avatarName","name","toLowerCase","some","it","endsWith","reader","FileReader","src","result","readAsDataURL","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","offerTemplate","content","POST_URL","adForm","adFormFieldsets","querySelectorAll","titleInput","currentPrice","address","houseTypeList","checkInTime","checkOutTime","selectRoomNumber","resetButton","selectCapacity","mapForm","mapFormFieldsets","minPrice","bungalow","flat","house","palace","getMinPrice","placeholder","value","min","numberOfRooms","1","2","3","100","forEach","input","setAttribute","classList","add","space","capacityOptions","roomsNumber","option","disabled","numberOfSeats","Number","includes","maxCapacity","length","setCustomValidity","reportValidity","valueLength","showSuccess","successPopup","createElement","style","width","height","position","zIndex","left","top","paddingTop","fontSize","fontWeight","textAlign","backgroundColor","textContent","body","append","setTimeout","remove","showError","alertContainer","right","padding","formReset","reset","resetMap","evt","onSuccess","onError","preventDefault","FormData","target","fetch","method","then","response","ok","catch","filterType","filterPrice","filterRooms","filterGuests","filterFeatures","getFilteredOffer","data","offer","type","checkType","price","checkPrice","rooms","checkRooms","guests","checkGuests","checkedFeatures","count","feature","features","checkFeatures","STARTING_LATITUDE","STARTING_LONGITUDE","map","L","on","removeAttribute","setView","lat","lng","tileLayer","attribution","addTo","mainPinIcon","icon","iconUrl","iconSize","iconAnchor","mainPinMarker","marker","draggable","onPinMove","latitude","toFixed","longitude","getAddress","getLatLng","markers","createDefaultPin","poster","slice","filter","location","defaultPinIcon","bindPopup","author","newOfferElement","cloneNode","featureContainer","photosContainer","container","title","checkin","checkout","innerHTML","item","li","appendChild","img","renderPhotos","photos","offerShow","push","setLatLng","latLng","cb","_","debounce","json"],"mappings":"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","file":"main.bundle.js","sourcesContent":["const FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\n\n// const avatarChooser = document.querySelector('.ad-form__upload input[type=file]');\n// const avatarPreview = document.querySelector('.ad-form-header__preview img');\nconst photoChooser = document.querySelector('.ad-form__upload input[type=file]');\nconst photoPreview = document.querySelector('.ad-form__photo img');\n\nphotoChooser.addEventListener('change', () => {\n  const avatar = photoChooser.files[0];\n  const avatarName = avatar.name.toLowerCase();\n\n  const matches = FILE_TYPES.some((it) => {\n    return avatarName.endsWith(it);\n  });\n\n  if (matches) {\n    const reader = new FileReader();\n          \n    reader.addEventListener('load', () => {\n      photoPreview.src = reader.result;\n    });\n          \n    reader.readAsDataURL(avatar);\n  }\n})\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const offerTemplate = document.querySelector('#card').content.querySelector('.popup');\n\nconst renderFeatures = (container, data) => {\n  container.innerHTML = '' //очистка контейнера с шаблонами\n  data.forEach((item) => {\n    const li = document.createElement('li'); // создание элемента\n    li.classList.add(`feature-item--${item}`) // добавление классов\n    container.appendChild(li) // добавление в контейнер элемента\n    li.textContent = item;\n  })\n};\n\nconst renderPhotos = (container, data) => {\n  container.innerHTML = ''; //очистка контейнера с шаблонами\n  data.forEach((item) => {\n    const img = document.createElement('img'); // создание элемента\n    img.src = item;\n    img.width = 45;\n    img.height = 40;\n    container.appendChild(img) // добавление в контейнер элемента\n    \n  })\n};\n\n\nconst offerShow = (({author, offer}) => {\n  const newOfferElement = offerTemplate.cloneNode(true);\n    \n  const featureContainer = newOfferElement.querySelector('.popup__features');\n  const photosContainer = newOfferElement.querySelector('.popup__photos'); \n\n  newOfferElement.querySelector('.popup__title').textContent = offer.title;\n  newOfferElement.querySelector('.popup__text--address').textContent = offer.address;\n  newOfferElement.querySelector('.popup__text--price').textContent = offer.price;\n  newOfferElement.querySelector('.popup__type').textContent = offer.type;\n  newOfferElement.querySelector('.popup__text--capacity').textContent = offer.rooms + ' комнаты для ' + offer.guests + ' гостей.';\n  newOfferElement.querySelector('.popup__text--time').textContent = ' Заезд после ' + offer.checkin + ', выезд до ' + offer.checkout;\n  newOfferElement.querySelector('.popup__features').textContent = offer.features;\n  renderFeatures(featureContainer, offer.features);\n  renderPhotos(photosContainer, offer.photos);\n  newOfferElement.querySelector('.popup__avatar').src = author.avatar;\n  \n  return newOfferElement;\n});\n\n\nexport {offerShow}","const FIXED_NUMBER = 5;\nconst GET_URL = 'https://22.javascript.pages.academy/keksobooking/data';\nconst POST_URL = 'https://22.javascript.pages.academy/keksobooking';\n\nconst getData = (onSuccess, onError) => {\n  return fetch(GET_URL)\n    .then((response) => response.json())\n    .then(onSuccess)\n    .catch(onError);\n};\n\nconst sendData = (onSuccess, onError, body) => {\n  fetch(\n    POST_URL,\n    {\n      method: 'POST',\n      body,\n    },\n  )\n    .then((response) => {\n      if (response.ok) {\n        return onSuccess();\n      }\n      onError();\n    })\n    .catch(() => {\n      onError();\n    });\n};\n\nexport {getData, sendData};\nexport {FIXED_NUMBER, GET_URL, POST_URL};\n","import {FIXED_NUMBER, POST_URL} from './data.js';\nimport {sendData} from './data.js';\nimport {resetMap} from './map.js'\n\nconst ALERT_SHOW_TIME = 5000;\n\n\nconst adForm = document.querySelector('.ad-form');\nconst adFormFieldsets = adForm.querySelectorAll('fieldset');\n\nconst titleInput = adForm.querySelector('#title');\nconst currentPrice = adForm.querySelector('#price');\nconst address = adForm.querySelector('#address');\nconst houseTypeList = adForm.querySelector('#type');\nconst checkInTime = adForm.querySelector('#timein');\nconst checkOutTime = adForm.querySelector('#timeout');\nconst selectRoomNumber = adForm.querySelector('#room_number');\nconst resetButton = adForm.querySelector('.ad-form__reset');\nconst selectCapacity = adForm.querySelector('#capacity');\n\nconst mapForm = document.querySelector('.map__filters');\nconst mapFormFieldsets = mapForm.querySelectorAll('.map__filter, .map__features');\n\nconst MIN_TITLE_LENGTH = 30;\nconst MAX_TITLE_LENGTH = 100;\n\nconst minPrice = {\n  bungalow: 0,\n  flat: 1000,\n  house: 5000,\n  palace: 10000,\n}\n  \nconst getMinPrice = () => {\n  currentPrice.placeholder = minPrice[houseTypeList.value];\n  currentPrice.min = minPrice[houseTypeList.value];\n}\n\nconst getAddress = (lat, lng) => {\n  const latitude = lat.toFixed(FIXED_NUMBER);\n  const longitude = lng.toFixed(FIXED_NUMBER);\n  address.value = `${latitude} ${longitude}`\n};\n\nconst numberOfRooms = {\n  1: [1],\n  2: [1,2],\n  3: [1,2,3],\n  100: [0],\n};\n\n//FORM UNAVAILABLE\nadFormFieldsets.forEach((input) => {\n  input.setAttribute('disabled', '');\n});\n\nmapForm.classList.add('map__filters--disabled');\nmapFormFieldsets.forEach((space) => {\n  space.setAttribute('disabled', '');\n});\n\n//FORM AVAILABLE\nconst formActivation = () => {\n  adFormFieldsets.forEach((input) => {\n    input.removeAttribute('disabled', '');\n  });\n\n  mapForm.classList.remove('map__filters--disabled');\n  mapFormFieldsets.forEach((space) => {\n    space.removeAttribute('disabled', '');\n  });\n}\n\n//ROOMINESS CHECK\nconst roominess = () => {\n  const capacityOptions = selectCapacity.querySelectorAll('option');\n  const roomsNumber =  selectRoomNumber.value;\n  capacityOptions.forEach((option) => {\n    option.disabled = true;\n  });\n\n  numberOfRooms[roomsNumber].forEach((numberOfSeats) => {\n    capacityOptions.forEach((option) => {\n      if (Number(option.value) === numberOfSeats) {\n        option.disabled = false;\n      }\n    });\n    if (!numberOfRooms[roomsNumber].includes(selectCapacity.value)) {\n      const maxCapacity = numberOfRooms[roomsNumber][numberOfRooms[roomsNumber].length - 1];\n      selectCapacity.value = maxCapacity;\n    }\n  });\n};\n\nselectRoomNumber.addEventListener('input', roominess)\n\n//CHECK_IN_TIME CHECK_OUT_TIME CONNECTION\nconst onCheckInTime = () => {\n  checkOutTime.value = checkInTime.value;\n}\nconst onCheckOutTime = () => {\n  checkInTime.value = checkOutTime.value;\n}\n\ncheckInTime.addEventListener('change', onCheckInTime);\ncheckOutTime.addEventListener('change', onCheckOutTime);\n\n//HOUSE_TYPE CONNECTION\nconst onHouseType = () => {\n  getMinPrice();\n}\n\nconst onCurrentPrice = () => {\n  getMinPrice();\n  if(currentPrice.value < currentPrice.min) {\n    currentPrice.setCustomValidity('Минимальная цена за ночь ' + currentPrice.min + ' руб.');\n  } else {\n    currentPrice.setCustomValidity('');\n  }\n\n  currentPrice.reportValidity();\n};\n\ncurrentPrice.addEventListener('input', onCurrentPrice);\nhouseTypeList.addEventListener('change', onHouseType);\n\n//FORM VALIDATION\ntitleInput.addEventListener('input', () => {\n  const valueLength = titleInput.value.length;\n\n  if (valueLength < MIN_TITLE_LENGTH) {\n    titleInput.setCustomValidity('Ещё ' + (MIN_TITLE_LENGTH - valueLength) +' симв.');\n  } else if (valueLength > MAX_TITLE_LENGTH) {\n    titleInput.setCustomValidity('Удалите лишние ' + (valueLength - MAX_TITLE_LENGTH) +' симв.');\n  } else {\n    titleInput.setCustomValidity('');\n  }\n\n  titleInput.reportValidity();\n});\n\n//SUCCESS POPUP\n\nconst showSuccess = () => {\n  const successPopup = document.createElement('div');\n\n  successPopup.style.width = '330px';\n  successPopup.style.height = '150px';\n  successPopup.style.position = 'fixed';\n  successPopup.style.zIndex = 1000;\n  successPopup.style.left = '37%';\n  successPopup.style.top = '100%';\n  successPopup.style.paddingTop = '66px';\n  successPopup.style.fontSize = '15px';\n  successPopup.style.fontWeight = 'bold';\n  successPopup.style.textAlign = 'center';\n  successPopup.style.backgroundColor = 'white';\n  successPopup.textContent = 'Ваше объявление успешно размещено!'\n  document.body.append(successPopup);\n\n  setTimeout(() => successPopup.remove(), ALERT_SHOW_TIME);\n};\n\n//ERROR POPUP\nconst showError = () => {\n  const alertContainer = document.createElement('div');\n\n  alertContainer.style.zIndex = 100;\n  alertContainer.style.position = 'fixed';\n  alertContainer.style.left = 0;\n  alertContainer.style.top = 0;\n  alertContainer.style.right = 0;\n  alertContainer.style.padding = '10px 3px';\n  alertContainer.style.fontSize = '30px';\n  alertContainer.style.textAlign = 'center';\n  alertContainer.style.backgroundColor = 'red';\n  alertContainer.textContent = 'Неудалось отправить форму! Попробуйте ещё раз.';\n  \n  document.body.append(alertContainer);\n\n  setTimeout(() => alertContainer.remove(), ALERT_SHOW_TIME);\n};\n\n\n//RESET\nconst formReset = () => {\n  adForm.reset();\n  mapForm.reset();\n  resetMap();\n}\n\n//FORM SUBMIT\nadForm.addEventListener('submit', (evt) => {\n  evt.preventDefault();\n\n  const formData = new FormData(evt.target);\n\n  sendData(\n    POST_URL,\n    showSuccess, \n    showError, \n    formData);\n  formReset();\n});\n\n//FORM RESET\nresetButton.addEventListener('click', (evt) => {\n  evt.preventDefault();\n  formReset();\n});\n\nexport {formActivation, getAddress, showError};\nexport {mapForm};\n\n","import {mapForm} from './form.js';\n\nconst filterType = mapForm.querySelector('#housing-type');\nconst filterPrice = mapForm.querySelector('#housing-price');\nconst filterRooms = mapForm.querySelector('#housing-rooms');\nconst filterGuests = mapForm.querySelector('#housing-guests');\nconst filterFeatures = mapForm.querySelector('#housing-features');\n\nconst checkType = (data) => {\n  return filterType.value === 'any' || data.offer.type === filterType.value;\n};\n\nconst checkPrice = (data) => {\n  const LOW_PRICE = 10000;\n  const HIGH_PRICE = 50000;\n  switch (filterPrice.value) {\n    case 'any':\n      return true;\n    case 'low':\n      return data.offer.price < LOW_PRICE;\n    case 'middle':\n      return data.offer.price >= LOW_PRICE && data.offer.price < HIGH_PRICE;\n    case 'high':\n      return data.offer.price >= HIGH_PRICE;\n    default:\n      return false;\n  }\n}\n\nconst checkRooms = (data) => {\n  return filterRooms.value === 'any' || data.offer.rooms === Number(filterRooms.value);\n}\n\nconst checkGuests = (data) => {\n  return filterGuests.value === 'any' || data.offer.guests === Number(filterGuests.value);\n}\n\nconst checkFeatures = (data) => {\n  const checkedFeatures = filterFeatures.querySelectorAll('.map__checkbox:checked');\n\n  let count = 0;\n  checkedFeatures.forEach((feature) => {\n    if(data.offer.features.includes(feature.value))\n      count++;\n  })\n\n  return count === checkedFeatures.length;\n}\n\nconst getFilteredOffer = (data) => {\n  return (\n    checkType(data) &&\n    checkPrice(data) &&\n    checkRooms(data) &&\n    checkGuests(data) &&\n    checkFeatures(data)\n  ) \n};\n\nconst setFilterChange = (cb) => {\n  mapForm.addEventListener('change', () => {\n    cb()\n  });\n};\n\nexport {setFilterChange, getFilteredOffer};","import {offerShow} from './card.js';\nimport {formActivation, getAddress, showError} from './form.js';\nimport {getData} from './data.js';\nimport {setFilterChange, getFilteredOffer} from './filter.js';\n/* global L:readonly */\n/* global _:readonly */\n\nconst STARTING_LATITUDE = 35.6804;\nconst STARTING_LONGITUDE = 139.7690;\nconst STARTING_ZOOM = 10;\nconst ADDS_LIMIT = 10;\nconst RENDER_DELAY = 500;\n\nconst map = L.map('map-canvas')\n  .on('load', formActivation)\n  .setView({\n    lat: STARTING_LATITUDE,\n    lng: STARTING_LONGITUDE,\n  },STARTING_ZOOM);\n\nL.tileLayer(\n  'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n  {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n  },\n).addTo(map);\n  \nconst mainPinIcon = L.icon({\n  iconUrl: 'img/main-pin.svg',\n  iconSize: [52, 52],\n  iconAnchor: [26, 52],\n});\n  \nconst mainPinMarker = L.marker(\n  {\n    lat: STARTING_LATITUDE,\n    lng: STARTING_LONGITUDE,\n  },\n  {\n    draggable: true,\n    icon: mainPinIcon,\n  },\n).addTo(map);\n\nconst onPinMove = (evt) => {\n  const lat = evt.target.getLatLng().lat;\n  const long = evt.target.getLatLng().lng;\n  getAddress(lat, long);\n}\n\nmainPinMarker.on('move', onPinMove);\n\nconst markers = [];\n\nconst createDefaultPin = (poster) => {\n\n  poster\n    .slice()\n    .filter(getFilteredOffer)\n    .slice(0, ADDS_LIMIT)\n    .forEach((offer) => {\n      const {location} = offer;\n\n      const defaultPinIcon = L.icon ({\n        iconUrl: 'img/pin.svg',\n        iconSize: [40, 40],\n        iconAnchor: [20, 40],\n      });\n\n      const marker = L.marker (\n        {\n          lat: location.lat,\n          lng: location.lng,\n        },\n        {\n          icon:defaultPinIcon,\n        },\n      );\n\n      marker\n        .addTo(map)\n        .bindPopup(\n          offerShow(offer),\n          {\n          },\n        );\n      marker.on('click', onPinMove); \n      markers.push(marker); \n    });\n\n};\n\n//REMOVE MARKER\n\nconst removeMarkers = () => {\n  markers.forEach((marker) => {\n    marker.remove();\n  })\n}\n\n//MAP RESET\nconst resetMap = () => {\n  map.setView({\n    lat: STARTING_LATITUDE,\n    lng: STARTING_LONGITUDE,\n  },STARTING_ZOOM);\n\n  mainPinMarker.setLatLng(L.latLng(STARTING_LATITUDE, STARTING_LONGITUDE));\n};\n\ngetData((data) => {\n  createDefaultPin(data);\n  setFilterChange(_.debounce(() => {\n    removeMarkers();\n    createDefaultPin(data);\n  }, RENDER_DELAY));\n}, showError);\n\nexport {resetMap, removeMarkers};\n\n\n"],"sourceRoot":""}